<?xml version="1.0" encoding="koi8-r" ?>
<!DOCTYPE change_log SYSTEM "../../dtd/changes.dtd" >


<change_log link="/nginx/changes.html" path="/nginx/" root=".."
            title="nginx">

<title lang="ru">Изменения в nginx</title>
<title lang="en">nginx changelog</title>


<changes ver="0.1.30" date="14.05.2005">

<change type="bugfix">
<para lang="ru">
при использовании SSI рабочий процесс мог зациклиться.
</para>
<para lang="en">
the worker process may got caught in an endless loop if the SSI was used.
</para>
</change>

<change type="bugfix">
<para lang="ru">
при использовании SSL ответ мог передаваться не до конца.
</para>
<para lang="en">
the response encrypted by SSL may not transferred complete.
</para>
</change>

<change type="bugfix">
<para lang="ru">
если длина части ответа, полученного за один раз от проксируемого или
FastCGI сервера была равна 500 байт, то nginx возвращал код ответа 500;
в режиме прокси ошибка появилась только в 0.1.29.
</para>
<para lang="en">
if the length of the response part received at once from proxied
or FastCGI server was equal to 500, then nginx returns the 500 response code;
in proxy mode the bug appeared in 0.1.29 only.
</para>
</change>

<change type="bugfix">
<para lang="ru">
nginx не считал неверными директивы с 8-ю или 9-ю параметрами.
</para>
<para lang="en">
nginx did not consider the directives with 8 or 9 parameters as invalid.
</para>
</change>

<change type="feature">
<para lang="ru">
директива return может возвращать код ответа 204.
</para>
<para lang="en">
the "return" directive can return the 204 response code.
</para>
</change>

<change type="feature">
<para lang="ru">
директива ignore_invalid_headers.
</para>
<para lang="en">
the "ignore_invalid_headers" directive.
</para>
</change>

</changes>


<changes ver="0.1.29" date="12.05.2005">

<change type="feature">
<para lang="ru">
модуль ngx_http_ssi_module поддерживает команду include virtual.
</para>
<para lang="en">
the ngx_http_ssi_module supports "include virtual" command.
</para>
</change>

<change type="feature">
<para lang="ru">
модуль ngx_http_ssi_module поддерживает условную команду вида
'if expr="$NAME"' и команды else и endif.
Допускается только один уровень вложенности.
</para>
<para lang="en">
the ngx_http_ssi_module supports the condition command like
'if expr="$NAME"' and "else" and "endif" commands.
Only one nested level is supported.
</para>
</change>

<change type="feature">
<para lang="ru">
модуль ngx_http_ssi_module поддерживает две переменные DATE_LOCAL и DATE_GMT
и команду config timefmt.
</para>
<para lang="en">
the ngx_http_ssi_module supports the DATE_LOCAL and DATE_GMT variables
and "config timefmt" command.
</para>
</change>

<change type="feature">
<para lang="ru">
директива ssi_ignore_recycled_buffers.
</para>
<para lang="en">
the "ssi_ignore_recycled_buffers" directive.
</para>
</change>

<change type="bugfix">
<para lang="ru">
если переменная QUERY_STRING не была определена, то в команде echo
не ставилось значение по умолчанию.
</para>
<para lang="en">
the "echo" command did not show the default value for the empty QUERY_STRING
variable.
</para>
</change>

<change type="change">
<para lang="ru">
модуль ngx_http_proxy_module полностью переписан.
</para>
<para lang="en">
the ngx_http_proxy_module was rewritten.
</para>
</change>

<change type="feature">
<para lang="ru">
директивы proxy_redirect, proxy_pass_request_headers,
proxy_pass_request_body и proxy_method.
</para>
<para lang="en">
the "proxy_redirect", "proxy_pass_request_headers",
"proxy_pass_request_body", and "proxy_method" directives.
</para>
</change>

<change type="feature">
<para lang="ru">
директива proxy_set_header.
Директива proxy_x_var упразднена и должна быть заменена директивой
proxy_set_header.
</para>
<para lang="en">
the "proxy_set_header" directive.
The "proxy_x_var" is canceled and must be replaced with the proxy_set_header
directive.
</para>
</change>

<change type="change">
<para lang="ru">
директива proxy_preserve_host упразднена и должна быть заменена директивами
"proxy_set_header Host $host" и "proxy_redirect off"
или директивой <nobr>"proxy_set_header Host $host:$proxy_port"</nobr>
и соответствующими ей директивами proxy_redirect.
</para>
<para lang="en">
the "proxy_preserve_host" is canceled and must be replaced with
the "proxy_set_header Host $host" and the "proxy_redirect off" directives,
the <nobr>"proxy_set_header Host $host:$proxy_port" directive</nobr>
and the appropriate proxy_redirect directives.
</para>
</change>

<change type="change">
<para lang="ru">
директива proxy_set_x_real_ip упразднена и должна быть заменена директивой
"proxy_set_header X-Real-IP $remote_addr".
</para>
<para lang="en">
the "proxy_set_x_real_ip" is canceled and must be replaced with
the "proxy_set_header X-Real-IP $remote_addr" directive.
</para>
</change>

<change type="change">
<para lang="ru">
директива proxy_add_x_forwarded_for упразднена и должна быть заменена
директивой
<nobr>"proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for".</nobr>
</para>
<para lang="en">
the "proxy_add_x_forwarded_for" is canceled and must be replaced with
<nobr>the "proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for"</nobr>
directive.
</para>
</change>

<change type="change">
<para lang="ru">
директива proxy_set_x_url упразднена и должна быть заменена директивой
<nobr>"proxy_set_header X-URL http://$host:$server_port$request_uri".</nobr>
</para>
<para lang="en">
the "proxy_set_x_url" is canceled and must be replaced with
the "proxy_set_header X-URL http://$host:$server_port$request_uri"
directive.
</para>
</change>

<change type="feature">
<para lang="ru">
директива fastcgi_param.
</para>
<para lang="en">
the "fastcgi_param" directive.
</para>
</change>

<change type="change">
<para lang="ru">
директивы fastcgi_root, fastcgi_set_var и fastcgi_params упразднены
и должны быть замены директивами fastcgi_param.
</para>
<para lang="en">
the "fastcgi_root", "fastcgi_set_var" and "fastcgi_params" directive
are canceled and must be replaced with the fastcgi_param directives.
</para>
</change>

<change type="feature">
<para lang="ru">
директива index может использовать переменные.
</para>
<para lang="en">
the "index" directive can use the variables.
</para>
</change>

<change type="feature">
<para lang="ru">
директива index может быть указана на уровне http и server.
</para>
<para lang="en">
the "index" directive can be used at http and server levels.
</para>
</change>

<change type="change">
<para lang="ru">
только последний параметр в директиве index может быть абсолютным.
</para>
<para lang="en">
the last index only in the "index" directive can be absolute.
</para>
</change>

<change type="feature">
<para lang="ru">
в директиве rewrite могут использоваться переменные.
</para>
<para lang="en">
the "rewrite" directive can use the variables.
</para>
</change>

<change type="feature">
<para lang="ru">
директива internal.
</para>
<para lang="en">
the "internal" directive.
</para>
</change>

<change type="feature">
<para lang="ru">
переменные CONTENT_LENGTH, CONTENT_TYPE, REMOTE_PORT, SERVER_ADDR,
SERVER_PORT, SERVER_PROTOCOL, DOCUMENT_ROOT, SERVER_NAME,
REQUEST_METHOD, REQUEST_URI и REMOTE_USER.
</para>
<para lang="en">
the CONTENT_LENGTH, CONTENT_TYPE, REMOTE_PORT, SERVER_ADDR,
SERVER_PORT, SERVER_PROTOCOL, DOCUMENT_ROOT, SERVER_NAME,
REQUEST_METHOD, REQUEST_URI, and REMOTE_USER variables.
</para>
</change>

<change type="change">
<para lang="ru">
nginx теперь передаёт неверные строки в заголовках запроса клиента и
ответа бэкенда.
</para>
<para lang="en">
nginx now passes the invalid lines in a client request headers
or a backend response header.
</para>
</change>

<change type="bugfix">
<para lang="ru">
если бэкенд долго не передавал ответ и send_timeout был меньше, чем
proxy_read_timeout, то клиенту возвращался ответ 408.
</para>
<para lang="en">
if the backend did not transfer response for a long time and
the "send_timeout" was less than "proxy_read_timeout", then nginx
returned the 408 response.
</para>
</change>

<change type="bugfix">
<para lang="ru">
если бэкенд передавал неверную строку в заголовке ответа, то происходил
segmentation fault;
ошибка появилась в 0.1.26.
</para>
<para lang="en">
the segmentation fault was occurred if the backend sent an invalid line
in response header;
bug appeared in 0.1.26.
</para>
</change>

<change type="bugfix">
<para lang="ru">
при использовании отказоустойчивой конфигурации в FastCGI мог
происходить segmentation fault.
</para>
<para lang="en">
the segmentation fault may occurred in FastCGI fault tolerance configuration.
</para>
</change>

<change type="bugfix">
<para lang="ru">
директива expires не удаляла уже установленные строки заголовка
"Expires" и "Cache-Control".
</para>
<para lang="en">
the "expires" directive did not remove the previous "Expires" and
"Cache-Control" headers.
</para>
</change>

<change type="bugfix">
<para lang="ru">
nginx не учитывал завершающую точку в строке заголовка запроса "Host".
</para>
<para lang="en">
nginx did not take into account trailing dot in "Host" header line.
</para>
</change>

<change type="bugfix">
<para lang="ru">
модуль ngx_http_auth_module не работал на Linux.
</para>
<para lang="en">
the ngx_http_auth_module did not work under Linux.
</para>
</change>

<change type="bugfix">
<para lang="ru">
директива rewrite неверно работала, если в запросе присутствовали аргументы.
</para>
<para lang="en">
the rewrite directive worked incorrectly, if the arguments were in a request.
</para>
</change>

<change type="bugfix">
<para lang="ru">
nginx не собирался на MacOS X.
</para>
<para lang="en">
nginx could not be built on MacOS X.
</para>
</change>

</changes>


<changes ver="0.1.28" date="08.04.2005">

<change type="bugfix">
<para lang="ru">
при проксировании больших файлов nginx сильно нагружал процессор.
</para>
<para lang="en">
nginx hogs CPU while proxing the huge files.
</para>
</change>

<change type="bugfix">
<para lang="ru">
nginx не собирался gcc 4.0 на Linux.
</para>
<para lang="en">
nginx could not be built by gcc 4.0 on Linux.
</para>
</change>

</changes>


<changes ver="0.1.27" date="28.03.2005">

<change type="feature">
<para lang="ru">
параметр blocked в директиве valid_referers.
</para>
<para lang="en">
the "blocked" parameter of the "valid_referers" directive.
</para>
</change>

<change type="change">
<para lang="ru">
ошибки обработки заголовка запроса теперь записываются на уровне
info, в лог также записывается имя сервера и строки заголовка
запроса "Host" и "Referer".
</para>
<para lang="en">
the errors while handling the request header now logged at "info" level.
The server name and the "Host" and "Referer" header lines also logged.
</para>
</change>

<change type="change">
<para lang="ru">
при записи ошибок в лог записывается также строка заголовка запроса "Host".
</para>
<para lang="en">
the "Host" header line is also logged in error log.
</para>
</change>

<change type="feature">
<para lang="ru">
директива proxy_pass_unparsed_uri.
Специальная обработка символов "://" в URI, введённая в версии 0.1.11,
теперь упразднена.
</para>
<para lang="en">
the proxy_pass_unparsed_uri directive.
The special handling of the "://" symbols in URI, appeared in 0.1.11 version,
now is canceled.
</para>
</change>

<change type="bugfix">
<para lang="ru">
nginx не собирался на FreeBSD и Linux, если был указан параметр конфигурации
--without-ngx_http_auth_basic_module.
</para>
<para lang="en">
nginx could not be built on FreeBSD and Linux, if the
--without-ngx_http_auth_basic_module configuration parameter was used.
</para>
</change>

</changes>


<changes ver="0.1.26" date="22.03.2005">

<change type="change">
<para lang="ru">
неверные строки заголовка, переданные клиентом, теперь игнорируется и
записываются в error_log на уровне info.
</para>
<para lang="en">
the invalid client header lines are now ignored and logged at the info level.
</para>
</change>

<change type="change">
<para lang="ru">
при записи ошибок в лог записывается также имя сервера, при обращении
к которому произошла ошибка.
</para>
<para lang="en">
the server name is also logged in error log.
</para>
</change>

<change type="feature">
<para lang="ru">
модуль ngx_http_auth_basic_module и директивы auth_basic и
auth_basic_user_file.
</para>
<para lang="en">
the ngx_http_auth_basic_module module and the auth_basic and
auth_basic_user_file directives.
</para>
</change>

</changes>


<changes ver="0.1.25" date="19.03.2005">

<change type="bugfix">
<para lang="ru">
nginx не работал на Linux parisc.
</para>
<para lang="en">
nginx did run on Linux parisc.
</para>
</change>

<change type="feature">
<para lang="ru">
nginx теперь не запускается под FreeBSD, если значение
sysctl kern.ipc.somaxconn слишком большое.
</para>
<para lang="en">
nginx now does not start under FreeBSD if the sysctl kern.ipc.somaxconn
value is too big.
</para>
</change>

<change type="bugfix">
<para lang="ru">
если модуль ngx_http_index_module делал внутреннее перенаправление запроса
в модули ngx_http_proxy_module или ngx_http_fastcgi_module, то файл индекса
не закрывался после обслуживания запроса.
</para>
<para lang="en">
if a request was internally redirected by the ngx_http_index_module
module to the ngx_http_proxy_module or ngx_http_fastcgi_module modules,
then the index file was not closed after request completion.
</para>
</change>

<change type="feature">
<para lang="ru">
директива proxy_pass может использоваться в location, заданных регулярным
выражением.
</para>
<para lang="en">
the "proxy_pass" can be used in location with regular expression.
</para>
</change>

<change type="feature">
<para lang="ru">
модуль ngx_http_rewrite_filter_module поддерживает условия вида
"if ($HTTP_USER_AGENT ~ MSIE)".
</para>
<para lang="en">
the ngx_http_rewrite_filter_module module supports the condition like
"if ($HTTP_USER_AGENT ~ MSIE)".
</para>
</change>

<change type="bugfix">
<para lang="ru">
nginx очень медленно запускался при большом количестве адресов и
использовании текстовых значений в директиве geo.
</para>
<para lang="en">
nginx started too slow if the large number of addresses and text values
were used in the "geo" directive.
</para>
</change>

<change type="change">
<para lang="ru">
имя переменной в директиве geo нужно указывать, как $name.
Прежний вариант без "$" пока работает, но вскоре будет убран.
</para>
<para lang="en">
a variable name must be declared as "$name" in the "geo" directive.
The previous variant without "$" is still supported, but will be removed soon.
</para>
</change>

<change type="feature">
<para lang="ru">
параметр лога "%{VARIABLE}v".
</para>
<para lang="en">
the "%{VARIABLE}v" logging parameter.
</para>
</change>

<change type="feature">
<para lang="ru">
директива "set $name value".
</para>
<para lang="en">
the "set $name value" directive.
</para>
</change>

<change type="bugfix">
<para lang="ru">
совместимость с gcc 4.0.
</para>
<para lang="en">
gcc 4.0 compatibility.
</para>
</change>

<change type="feature">
<para lang="ru">
параметр автоконфигурации --with-openssl-opt=OPTIONS.
</para>
<para lang="en">
the --with-openssl-opt=OPTIONS autoconfiguration directive.
</para>
</change>

</changes>


<changes ver="0.1.24" date="04.03.2005">

<change type="feature">
<para lang="ru">
модуль ngx_http_ssi_filter_module поддерживает переменные
QUERY_STRING и DOCUMENT_URI.
</para>
<para lang="en">
the ngx_http_ssi_filter_module supports the QUERY_STRING and DOCUMENT_URI
variables.
</para>
</change>

<change type="bugfix">
<para lang="ru">
модуль ngx_http_autoindex_module мог выдавать ответ 404
на существующий каталог, если этот каталог был указан как alias.
</para>
<para lang="en">
the ngx_http_autoindex_module may some times return the 404 response
for existent directory, if this directory was used in "alias" directive.
</para>
</change>

<change type="bugfix">
<para lang="ru">
модуль ngx_http_ssi_filter_module неправильно работал при больших
ответах.
</para>
<para lang="en">
the ngx_http_ssi_filter_module ran incorrectly for large responses.
</para>
</change>

<change type="bugfix">
<para lang="ru">
отсутствие строки заголовка "Referer" всегда считалось правильным referrer'ом.
</para>
<para lang="en">
the lack of the "Referer" header line was always accounted as valid referrer.
</para>
</change>

</changes>


<changes ver="0.1.23" date="01.03.2005">

<change type="feature">
<para lang="ru">
модуль ngx_http_ssi_filter_module и
директивы ssi, ssi_silent_errors и ssi_min_file_chunk.
Поддерживаются команды 'echo var="HTTP_..." default=""' и
'echo var="REMOTE_ADDR"'.
</para>
<para lang="en">
the ngx_http_ssi_filter_module and
the ssi, ssi_silent_errors, and ssi_min_file_chunk directives.
The 'echo var="HTTP_..." default=""' and 'echo var="REMOTE_ADDR"' commands
are supported.
</para>
</change>

<change type="feature">
<para lang="ru">
параметр лога %request_time.
</para>
<para lang="en">
the %request_time log parameter.
</para>
</change>

<change type="feature">
<para lang="ru">
если запрос пришёл без строки заголовка "Host", то директива
proxy_preserve_host устанавливает в качестве этого заголовка первое имя
сервера из директивы server_name.
</para>
<para lang="en">
if the request has no the "Host" header line, then the proxy_preserve_host
directive set this header line to the first server name of the server_name
directive.
</para>
</change>

<change type="bugfix">
<para lang="ru">
nginx не собирался на платформах, отличных от i386, amd64, sparc и ppc;
ошибка появилась в 0.1.22.
</para>
<para lang="en">
nginx could not be built on platforms different from i386, amd64, sparc и ppc;
bug appeared in 0.1.22.
</para>
</change>

<change type="bugfix">
<para lang="ru">
модуль ngx_http_autoindex_module теперь показывает информацию не о
символическом линке, а о файле или каталоге, на который он указывает.
</para>
<para lang="en">
the ngx_http_autoindex_module now shows the information not about the symlink,
but about file or directory it points to.
</para>
</change>

<change type="bugfix">
<para lang="ru">
если клиенту ничего не передавалось, то параметр %apache_length
записывал в лог отрицательную длину заголовка ответа.
</para>
<para lang="en">
the %apache_length parameter logged the negative length
of the response header if the no response was transferred to a client.
</para>
</change>

</changes>


<changes ver="0.1.22" date="22.02.2005">

<change type="bugfix">
<para lang="ru">
модуль ngx_http_stub_status_module показывал неверную статистику
для обработанных соединений, если использовалось проксирование
или FastCGI-сервер.
</para>
<para lang="en">
the ngx_http_stub_status_module showed incorrect handled connections
statistics if the proxing or FastCGI server were used.
</para>
</change>

<change type="bugfix">
<para lang="ru">
на Linux и Solaris установочные пути были неверно заключены в кавычки;
ошибка появилась в 0.1.21.
</para>
<para lang="en">
the installation paths were incorrectly quoted on Linux and Solaris;
bug appeared in 0.1.21.
</para>
</change>

</changes>


<changes ver="0.1.21" date="22.02.2005">

<change type="bugfix">
<para lang="ru">
модуль ngx_http_stub_status_module показывал неверную статистику
при использовании метода rtsig или при использовании нескольких
рабочих процессов на SMP машине.
</para>
<para lang="en">
the ngx_http_stub_status_module showed incorrect statistics
if "rtsig" method was used or if several worker process ran on SMP.
</para>
</change>

<change type="bugfix">
<para lang="ru">
nginx не собирался компилятором icc под Линуксом или
если библиотека zlib-1.2.x собиралась из исходных текстов.
</para>
<para lang="en">
nginx could not be built by the icc compiler on Linux or
if the zlib-1.2.x library was building from sources.
</para>
</change>

<change type="bugfix">
<para lang="ru">
nginx не собирался под NetBSD 2.0.
</para>
<para lang="en">
nginx could not be built on NetBSD 2.0.
</para>
</change>

</changes>


<changes ver="0.1.20" date="17.02.2005">

<change type="feature">
<para lang="ru">
новые параметры script_filename и remote_port в директиве fastcgi_params.
</para>
<para lang="en">
the new "script_filename" and "remote_port" parameters
of the fastcgi_params directive.
</para>
</change>

<change type="bugfix">
<para lang="ru">
неправильно обрабатывался поток stderr от FastCGI-сервера.
</para>
<para lang="en">
the FastCGI stderr stream was handled incorrectly.
</para>
</change>

</changes>


<changes ver="0.1.19" date="16.02.2005">

<change type="bugfix">
<para lang="ru">
если в запросе есть нуль, то для локальных запросов теперь возвращается
ошибка 404.
</para>
<para lang="en">
now, if request contains the zero, then the 404 error is returned
for the local requests.
</para>
</change>

<change type="bugfix">
<para lang="ru">
nginx не собирался под NetBSD 2.0.
</para>
<para lang="en">
nginx could not be built on NetBSD 2.0.
</para>
</change>

<change type="bugfix">
<para lang="ru">
во время чтения тела запроса клиента в SSL соединении мог произойти таймаут.
</para>
<para lang="en">
the timeout may occur while reading of the the client request body
via SSL connections.
</para>
</change>

</changes>


<changes ver="0.1.18" date="09.02.2005">

<change type="workaround">
<para lang="ru">
для совместимости с Solaris 10 в директивах devpoll_events и devpoll_changes
значения по умолчанию уменьшены с 512 до 32.
</para>
<para lang="en">
the default values of the devpoll_events and the devpoll_changes directives
changed from 512 to 32 to be compatible with Solaris 10.
</para>
</change>

<change type="bugfix">
<para lang="ru">
директивы proxy_set_x_var и fastcgi_set_var не наследовались.
</para>
<para lang="en">
the proxy_set_x_var and fastcgi_set_var directives were not inherited.
</para>
</change>

<change type="bugfix">
<para lang="ru">
в директиве rewrite, возвращающей редирект, аргументы присоединялись
к URI через символ "&amp;" вместо "?".
</para>
<para lang="en">
in the redirect rewrite directive the arguments were concatenated with URI
by the "&amp;" rather than the "?".
</para>
</change>

<change type="bugfix">
<para lang="ru">
строки для модуля ngx_http_geo_module без символа ";" во включённом файле
игнорировались.
</para>
<para lang="en">
the lines without trailing ";" in the file being included
by the ngx_http_geo_module were silently ignored.
</para>
</change>

<change type="feature">
<para lang="ru">
модуль ngx_http_stub_status_module.
</para>
<para lang="en">
the ngx_http_stub_status_module.
</para>
</change>

<change type="bugfix">
<para lang="ru">
неизвестный формат лог-файла в директиве access_log вызывал segmentation fault.
</para>
<para lang="en">
the unknown log format in the access_log directive caused
the segmentation fault.
</para>
</change>

<change type="feature">
<para lang="ru">
новый параметр document_root в директиве fastcgi_params.
</para>
<para lang="en">
the new "document_root" parameter of the fastcgi_params directive.
</para>
</change>

<change type="feature">
<para lang="ru">
директива fastcgi_redirect_errors.
</para>
<para lang="en">
the fastcgi_redirect_errors directive.
</para>
</change>

<change type="feature">
<para lang="ru">
новый модификатор break в директиве rewrite позволяет прекратить
цикл rewrite/location и устанавливает текущую конфигурацию для запроса.
</para>
<para lang="en">
the new "break" modifier of the "rewrite" directive allows to stop
the rewrite/location cycle and sets the current configuration to the request.
</para>
</change>

</changes>


<changes ver="0.1.17" date="03.02.2005">

<change type="change">
<para lang="ru">
модуль ngx_http_rewrite_module полностью переписан.
Теперь можно делать редиректы, возвращать коды ошибок
и проверять переменные и рефереры.
Эти директивы можно использовать внутри location.
Директива redirect упразднена.
</para>
<para lang="en">
the ngx_http_rewrite_module was rewritten from the scratch.
Now it is possible to redirect, to return the error codes,
to check the variables and referrers. The directives can be used
inside locations.
The redirect directive was canceled.
</para>
</change>

<change type="feature">
<para lang="ru">
модуль ngx_http_geo_module.
</para>
<para lang="en">
the ngx_http_geo_module.
</para>
</change>

<change type="feature">
<para lang="ru">
директивы proxy_set_x_var и fastcgi_set_var.
</para>
<para lang="en">
the proxy_set_x_var and fastcgi_set_var directives.
</para>
</change>

<change type="bugfix">
<para lang="ru">
конфигурация location с модификатором "=" могла использоваться
в другом location.
</para>
<para lang="en">
the location configuration with "=" modifier may be used in another
location.
</para>
</change>

<change type="bugfix">
<para lang="ru">
правильный тип ответа выставлялся только для запросов, у которых в расширении
были только маленькие буквы.
</para>
<para lang="en">
the correct content type was set only for requests that use small caps letters
in extension.
</para>
</change>

<change type="bugfix">
<para lang="ru">
если для location установлен proxy_pass или fastcgi_pass, и доступ
к нему запрещался, а ошибка перенаправлялась на статическую страницу,
то происходил segmentation fault.
</para>
<para lang="en">
if the proxy_pass or fastcgi_pass directives were set in the location,
and access was denied, and the error was redirected to a static page,
then the segmentation fault occurred.
</para>
</change>

<change type="bugfix">
<para lang="ru">
если в проксированном ответе в заголовке "Location" передавался
относительный URL, то к нему добавлялось имя хоста и слэш;
ошибка появилась в 0.1.14.
</para>
<para lang="en">
if in a proxied "Location" header was a relative URL,
then a host name and a slash were added to them;
bug appeared in 0.1.14.
</para>
</change>

<change type="bugfix">
<para lang="ru">
на Linux в лог не записывался текст системной ошибки.
</para>
<para lang="en">
the system error message was not logged on Linux.
</para>
</change>

</changes>


<changes ver="0.1.16" date="25.01.2005">

<change type="bugfix">
<para lang="ru">
если ответ передавался chunk'ами, то при запросе HEAD выдавался
завершающий chunk. 
</para>
<para lang="en">
if the response were transferred by chunks, then on the HEAD request
the final chunk was issued.
</para>
</change>

<change type="bugfix">
<para lang="ru">
заголовок "Connection: keep-alive" выдавался, даже если директива
keepalive_timeout запрещала использование keep-alive.
</para>
<para lang="en">
the "Connection: keep-alive" header were issued, even if the
keepalive_timeout directive forbade the keep-alive use.
</para>
</change>

<change type="bugfix">
<para lang="ru">
ошибки в модуле ngx_http_fastcgi_module вызывали segmentation fault.
</para>
<para lang="en">
the errors in the ngx_http_fastcgi_module caused the segmentation faults.
</para>
</change>

<change type="bugfix">
<para lang="ru">
при использовании SSL сжатый ответ мог передаваться не до конца.
</para>
<para lang="en">
the compressed response encrypted by SSL may not transferred complete.
</para>
</change>

<change type="bugfix">
<para lang="ru">
опции TCP_NODELAY, TCP_NOPSUH и TCP_CORK, специфичные для TCP сокетов,
не используются для unix domain сокетов.
</para>
<para lang="en">
the TCP-specific TCP_NODELAY, TCP_NOPSUH, and TCP_CORK options,
are not used for the unix domain sockets.
</para>
</change>

<change type="feature">
<para lang="ru">
директива rewrite поддерживает перезаписывание аргументов.
</para>
<para lang="en">
the rewrite directive supports the arguments rewriting.
</para>
</change>

<change type="bugfix">
<para lang="ru">
на запрос POST с заголовком "Content-Length: 0" возвращался ответ 400;
ошибка появилась в 0.1.14.
</para>
<para lang="en">
the response code 400 was returned for the POST request with the
"Content-Length: 0" header;
bug appeared in 0.1.14.
</para>
</change>

</changes>


<changes ver="0.1.15" date="19.01.2005">

<change type="bugfix">
<para lang="ru">
ошибка соединения с FastCGI-сервером вызывала segmentation fault.
</para>
<para lang="en">
the error while the connecting to the FastCGI server caused
segmentation fault.
</para>
</change>

<change type="bugfix">
<para lang="ru">
корректная обработка регулярного выражения, в котором число
выделенных частей не совпадает с числом подстановок.
</para>
<para lang="en">
the correct handling of the regular expression, that
has different number of the captures and substitutions.
</para>
</change>

<change type="feature">
<para lang="ru">
location, который передаётся FastCGI-серверу, может быть задан
с помощью регулярного выражения.
</para>
<para lang="en">
the location, that is passed to the FastCGI server, can be
regular expression.
</para>
</change>

<change type="bugfix">
<para lang="ru">
параметр FastCGI REQUEST_URI теперь передаётся вместе с аргументами
и в том виде, в котором был получен от клиента.
</para>
<para lang="en">
the FastCGI's parameter REQUEST_URI is now passed with the arguments
and in the original state.
</para>
</change>

<change type="bugfix">
<para lang="ru">
для использования регулярных выражений в location нужно было
собирать nginx вместе с ngx_http_rewrite_module.
</para>
<para lang="en">
the ngx_http_rewrite_module module was required to be built to use
the regular expressions in locations.
</para>
</change>

<change type="bugfix">
<para lang="ru">
если бэкенд слушал на 80-ом порту, то при использовании директивы
<nobr>"proxy_preserve_host  on"</nobr> в заголовке "Host" указывался
также порт 80;
ошибка появилась в 0.1.14.
</para>
<para lang="en">
the directive <nobr>"proxy_preserve_host  on"</nobr> adds port 80
to the "Host" headers, if upstream listen on port 80;
bug appeared in 0.1.14.
</para>
</change>

<change type="bugfix">
<para lang="ru">
если задать одинаковые пути в параметрах автоконфигурации
--http-client-body-temp-path=PATH и --http-proxy-temp-path=PATH
или --http-client-body-temp-path=PATH и --http-fastcgi-temp-path=PATH,
то происходил segmentation fault.
</para>
<para lang="en">
the same paths in autoconfiguration parameters
--http-client-body-temp-path=PATH and --http-proxy-temp-path=PATH,
or --http-client-body-temp-path=PATH and --http-fastcgi-temp-path=PATH
caused segmentation fault.
</para>
</change>

</changes>


<changes ver="0.1.14" date="18.01.2005">

<change type="feature">
<para lang="ru">
параметры автоконфигурации
--http-client-body-temp-path=PATH,
--http-proxy-temp-path=PATH
и --http-fastcgi-temp-path=PATH
</para>
<para lang="en">
the autoconfiguration directives:
--http-client-body-temp-path=PATH,
--http-proxy-temp-path=PATH,
and --http-fastcgi-temp-path=PATH
</para>
</change>

<change type="change">
<para lang="ru">
имя каталога с временными файлами, содержащие тело запроса клиента,
задаётся директивой client_body_temp_path,
по умолчанию &lt;prefix&gt;/client_body_temp.
</para>
<para lang="en">
the directory name for the temporary files with the client request body
is specified by directive client_body_temp_path,
by default it is &lt;prefix&gt;/client_body_temp.
</para>
</change>

<change type="feature">
<para lang="ru">
модуль ngx_http_fastcgi_module и директивы
fastcgi_pass,
fastcgi_root,
fastcgi_index,
fastcgi_params,
fastcgi_connect_timeout,
fastcgi_send_timeout,
fastcgi_read_timeout,
fastcgi_send_lowat,
fastcgi_header_buffer_size,
fastcgi_buffers,
fastcgi_busy_buffers_size,
fastcgi_temp_path,
fastcgi_max_temp_file_size,
fastcgi_temp_file_write_size,
fastcgi_next_upstream
и fastcgi_x_powered_by.

</para>
<para lang="en">
the ngx_http_fastcgi_module and the directives:
fastcgi_pass,
fastcgi_root,
fastcgi_index,
fastcgi_params,
fastcgi_connect_timeout,
fastcgi_send_timeout,
fastcgi_read_timeout,
fastcgi_send_lowat,
fastcgi_header_buffer_size,
fastcgi_buffers,
fastcgi_busy_buffers_size,
fastcgi_temp_path,
fastcgi_max_temp_file_size,
fastcgi_temp_file_write_size,
fastcgi_next_upstream,
and fastcgi_x_powered_by.
</para>
</change>

<change type="bugfix">
<para lang="ru">
ошибка "[alert] zero size buf";
ошибка появилась в 0.1.3.
</para>
<para lang="en">
the "[alert] zero size buf" error;
bug appeared in 0.1.3.
</para>
</change>

<change type="change">
<para lang="ru">
в директиве proxy_pass нужно обязательно указывать URI после имени хоста.
</para>
<para lang="en">
the URI must be specified after the host name in the proxy_pass directive.
</para>
</change>

<change type="change">
<para lang="ru">
если в URI встречался символ %3F, то он считался началом строки аргументов.
</para>
<para lang="en">
the %3F symbol in the URI was considered as the argument string start.
</para>
</change>

<change type="feature">
<para lang="ru">
поддержка unix domain сoкетов в модуле ngx_http_proxy_module.
</para>
<para lang="en">
the unix domain sockets support in the ngx_http_proxy_module.
</para>
</change>

<change type="feature">
<para lang="ru">
директивы ssl_engine и ssl_ciphers.<br/>
Спасибо Сергею Скворцову за SSL-акселератор.
</para>
<para lang="en">
the ssl_engine and ssl_ciphers directives.<br/>
Thanks to Sergey Skvortsov for SSL-accelerator.
</para>
</change>

</changes>


<changes ver="0.1.13" date="21.12.2004">

<change type="feature">
<para lang="ru">
директивы server_names_hash и server_names_hash_threshold.
</para>
<para lang="en">
the server_names_hash and server_names_hash_threshold directives.
</para>
</change>

<change type="bugfix">
<para lang="ru">
имена *.domain.tld в директиве server_name не работали.
</para>
<para lang="en">
the *.domain.tld names in the server_name directive did not work.
</para>
</change>

<change type="bugfix">
<para lang="ru">
параметр лога %request_length записывал неверную длину.
</para>
<para lang="en">
the %request_length log parameter logged the incorrect length.
</para>
</change>

</changes>


<changes ver="0.1.12" date="06.12.2004">

<change type="feature">
<para lang="ru">
параметр лога %request_length.
</para>
<para lang="en">
the %request_length log parameter.
</para>
</change>

<change type="bugfix">
<para lang="ru">
при использовании /dev/poll, select и poll на платформах, где возможны
ложные срабатывания указанных методов, могли быть длительные задержки
при обработке запроса по keep-alive соединению.
Наблюдалось по крайней мере на Solaris с использованием /dev/poll.
</para>
<para lang="en">
when using the /dev/poll, select and poll on the platforms, where
these methods may do the false reports, there may be the long delay when
the request was passed via the keep-alive connection.
It may be at least on Solaris when using the /dev/poll.
</para>
</change>

<change type="bugfix">
<para lang="ru">
директива send_lowat игнорируется на Linux, так как Linux не поддерживает
опцию SO_SNDLOWAT.
</para>
<para lang="en">
the send_lowat directive is ignored on Linux because Linux does not support
the SO_SNDLOWAT option.
</para>
</change>

</changes>


<changes ver="0.1.11" date="02.12.2004">

<change type="feature">
<para lang="ru">
директива worker_priority.
</para>
<para lang="en">
the worker_priority directive.
</para>
</change>

<change type="change">
<para lang="ru">
под FreeBSD директивы tcp_nopush и tcp_nodelay вместе влияют на передачу
ответа.
</para>
<para lang="en">
both tcp_nopush and tcp_nodelay directives affect the transferred response.
</para>
</change>

<change type="bugfix">
<para lang="ru">
nginx не вызывал initgroups().<br/>
Спасибо Андрею Ситникову и Андрею Нигматулину.
</para>
<para lang="en">
nginx did not call initgroups().<br/>
Thanks to Andrew Sitnikov and Andrei Nigmatulin.
</para>
</change>

<change type="change">
<para lang="ru">
ngx_http_auto_index_module теперь выдаёт размер файлов в байтах.
</para>
<para lang="en">
now the ngx_http_autoindex_module shows the file size in the bytes.
</para>
</change>

<change type="bugfix">
<para lang="ru">
ngx_http_auto_index_module возвращал ошибку 500, если в каталоге есть
битый symlink.
</para>
<para lang="en">
the ngx_http_autoindex_module returned the 500 error if the broken symlink
was in a directory.
</para>
</change>

<change type="bugfix">
<para lang="ru">
файлы больше 4G не передавались с использованием sendfile.
</para>
<para lang="en">
the files bigger than 4G could not be transferred using sendfile.
</para>
</change>

<change type="bugfix">
<para lang="ru">
если бэкенд резолвился в несколько адресов и при ожидании от него ответа
происходила ошибка, то процесс зацикливался.
</para>
<para lang="en">
if the backend was resolved to several backends and there was an error while
the response waiting then process may got caught in an endless loop.
</para>
</change>

<change type="bugfix">
<para lang="ru">
при использовании метода /dev/poll рабочий процесс мог завершиться
с сообщением "unknown cycle".
</para>
<para lang="en">
the worker process may exit with the "unknown cycle" message when the /dev/poll
method was used.
</para>
</change>

<change type="bugfix">
<para lang="ru">
ошибки "close() channel failed".
</para>
<para lang="en">
"close() channel failed" errors.
</para>
</change>

<change type="bugfix">
<para lang="ru">
автоматическое определение групп nobody и nogroup.
</para>
<para lang="en">
the autodetection of the "nobody" and "nogroup" groups.
</para>
</change>

<change type="bugfix">
<para lang="ru">
директива send_lowat не работала на Linux.
</para>
<para lang="en">
the send_lowat directive did not work on Linux.
</para>
</change>

<change type="bugfix">
<para lang="ru">
если в конфигурации не было раздела events, то происходил segmentation fault.
</para>
<para lang="en">
the segmentation fault occurred if there was no events section
in configuration.
</para>
</change>

<change type="bugfix">
<para lang="ru">
nginx не собирался под OpenBSD.
</para>
<para lang="en">
nginx could not be built on OpenBSD.
</para>
</change>

<change type="bugfix">
<para lang="ru">
двойные слэшы в "://" в URI превращались в ":/".
</para>
<para lang="en">
the double slashes in "://" in the URI were converted to ":/".
</para>
</change>

</changes>


<changes ver="0.1.10" date="26.11.2004">

<change type="bugfix">
<para lang="ru">
если в запросе без аргументов есть "//", "/./", "/../" или "%XX",
то терялся последний символ в строке запроса;
ошибка появилась в 0.1.9.
</para>
<para lang="en">
if the request without arguments contains "//", "/./", "/../" or "%XX"
then the lost character in the request line was lost;
bug appeared in 0.1.9.
</para>
</change>

<change type="bugfix">
<para lang="ru">
исправление в версии 0.1.9 для файлов больше 2G на Linux не работало.
</para>
<para lang="en">
the fix in 0.1.9 for the files bigger than 2G on Linux did not work.
</para>
</change>

</changes>


<changes ver="0.1.9" date="25.11.2004">

<change type="bugfix">
<para lang="ru">
если в запросе есть "//", "/./", "/../" или "%XX", то проксируемый
запрос передавался без аргументов.
</para>
<para lang="en">
the proxied request was sent without arguments if the request contains
"//", "/./", "/../" or "%XX".
</para>
</change>

<change type="bugfix">
<para lang="ru">
при сжатии больших ответов иногда они передавались не полностью.
</para>
<para lang="en">
the large compressed responses may be transferred not completely.
</para>
</change>

<change type="bugfix">
<para lang="ru">
не передавались файлы больше 2G на Linux, неподдерживающем sendfile64().
</para>
<para lang="en">
the files bigger than 2G was not transferred on Linux that does not support
sendfile64().
</para>
</change>

<change type="bugfix">
<para lang="ru">
на Linux при конфигурации сборки нужно было обязательно использовать
параметр --with-poll_module;
ошибка появилась в 0.1.8.
</para>
<para lang="en">
while the build configuration on Linux the --with-poll_module parameter
was required;
bug appeared in 0.1.8.
</para>
</change>

</changes>


<changes ver="0.1.8" date="20.11.2004">

<change type="bugfix">
<para lang="ru">
ошибка в модуле ngx_http_autoindex_module при показе длинных имён файлов.
</para>
<para lang="en">
in the ngx_http_autoindex_module if the long file names were in the listing.
</para>
</change>

<change type="feature">
<para lang="ru">
модификатор "^~" в директиве location.
</para>
<para lang="en">
the "^~" modifier in the location directive.
</para>
</change>

<change type="feature">
<para lang="ru">
директива proxy_max_temp_file_size.
</para>
<para lang="en">
the proxy_max_temp_file_size directive.
</para>
</change>

</changes>


<changes ver="0.1.7" date="12.11.2004">

<change type="bugfix">
<para lang="ru">
при использовании sendfile, если передаваемый файл менялся, то мог
произойти segmentation fault на FreeBSD;
ошибка появилась в 0.1.5.
</para>
<para lang="en">
on FreeBSD the segmentation fault may occur if the size of the transferred
file was changed;
bug appeared in 0.1.5.
</para>
</change>

</changes>


<changes ver="0.1.6" date="11.11.2004">

<change type="bugfix">
<para lang="ru">
при некоторых комбинациях директив location c регулярными выражениями
использовалась конфигурация не из того location.
</para>
<para lang="en">
some location directive combinations with the regular expressions caused
the wrong configuration choose.
</para>
</change>

</changes>


<changes ver="0.1.5" date="11.11.2004">

<change type="bugfix">
<para lang="ru">
на Solaris и Linux могло быть очень много сообщений "recvmsg() returned
not enough data".
</para>
<para lang="en">
on Solaris and Linux there may be too many "recvmsg() returned not enough data"
alerts.
</para>
</change>

<change type="bugfix">
<para lang="ru">
в режиме прокси без использования sendfile на Solaris возникала
ошибка "writev() failed <nobr>(22: Invalid argument)".</nobr>
На других платформах, не поддерживающих sendfile, процесс зацикливался.
</para>
<para lang="en">
there were the "writev() failed <nobr>(22: Invalid argument)"</nobr> errors on
Solaris in proxy mode without sendfile. On other platforms that do not
support sendfile at all the process got caught in an endless loop.
</para>
</change>

<change type="bugfix">
<para lang="ru">
при использовании sendfile в режиме прокси на Solaris возникал
segmentation fault.
</para>
<para lang="en">
segmentation fault on Solaris in proxy mode and using sendfile.
</para>
</change>

<change type="bugfix">
<para lang="ru">
segmentation fault на Solaris.
</para>
<para lang="en">
segmentation fault on Solaris.
</para>
</change>

<change type="bugfix">
<para lang="ru">
обновление исполняемого файла на лету не работало на Linux.
</para>
<para lang="en">
on-line upgrade did not work on Linux.
</para>
</change>

<change type="bugfix">
<para lang="ru">
в списке файлов, выдаваемом модулем ngx_http_autoindex_module,
не перекодировались пробелы, кавычки и знаки процента.
</para>
<para lang="en">
the ngx_http_autoindex_module module did not escape the spaces,
the quotes, and the percent signs in the directory listing.
</para>
</change>

<change type="change">
<para lang="ru">
уменьшение операций копирования.
</para>
<para lang="en">
the decrease of the copy operations.
</para>
</change>

<change type="feature">
<para lang="ru">
директива userid_p3p.
</para>
<para lang="en">
the userid_p3p directive.
</para>
</change>

</changes>


<changes ver="0.1.4" date="26.10.2004">

<change type="bugfix">
<para lang="ru">
ошибка в модуле ngx_http_autoindex_module.
</para>
<para lang="en">
in the ngx_http_autoindex_module.
</para>
</change>

</changes>


<changes ver="0.1.3" date="25.10.2004">

<change type="feature">
<para lang="ru">
модуль ngx_http_autoindex_module и директива autoindex.
</para>
<para lang="en">
the ngx_http_autoindex_module and the autoindex directive.
</para>
</change>

<change type="feature">
<para lang="ru">
директива proxy_set_x_url.
</para>
<para lang="en">
the proxy_set_x_url directive.
</para>
</change>

<change type="bugfix">
<para lang="ru">
модуль проксировании мог привести к зацикливанию, если не использовался
sendfile.
</para>
<para lang="en">
proxy module may get caught in an endless loop when sendfile is not used.
</para>
</change>

</changes>


<changes ver="0.1.2" date="21.10.2004">

<change type="feature">
<para lang="ru">
параметры --user=USER, --group=GROUP и --with-ld-opt=OPTIONS в configure.
</para>
<para lang="en">
the --user=USER, --group=GROUP, and --with-ld-opt=OPTIONS options in configure.
</para>
</change>

<change type="feature">
<para lang="ru">
директива server_name поддерживает *.domain.tld.
</para>
<para lang="en">
the server_name directive supports *.domain.tld.
</para>
</change>

<change type="bugfix">
<para lang="ru">
улучшена переносимость на неизвестные платформы.
</para>
<para lang="en">
the portability improvements.
</para>
</change>

<change type="bugfix">
<para lang="ru">
нельзя переконфигурировать nginx, если конфигурационный файл указан
в командной строке;
ошибка появилась в 0.1.1.
</para>
<para lang="en">
if configuration file was set in command line, the reconfiguration
was impossible;
bug appeared in 0.1.1.
</para>
</change>

<change type="bugfix">
<para lang="ru">
модуль проксировании мог привести к зацикливанию, если не использовался
sendfile.
</para>
<para lang="en">
proxy module may get caught in an endless loop when sendfile is not used.
</para>
</change>

<change type="bugfix">
<para lang="ru">
при использовании sendfile текст ответа не перекодировался
согласно директивам модуля charset;
ошибка появилась в 0.1.1.
</para>
<para lang="en">
with sendfile the response was not recoded according to the charset
module directives;
bug appeared in 0.1.1.
</para>
</change>

<change type="bugfix">
<para lang="ru">
очень редкая ошибка при обработке kqueue.
</para>
<para lang="en">
very seldom bug in the kqueue processing.
</para>
</change>

<change type="bugfix">
<para lang="ru">
модуль сжатия сжимал уже сжатые ответы, полученные при проксировании.
</para>
<para lang="en">
the gzip module compressed the proxied responses that was already compressed.
</para>
</change>

</changes>


<changes ver="0.1.1" date="11.10.2004">

<change type="feature">
<para lang="ru">
директива gzip_types.
</para>
<para lang="en">
the gzip_types directive.
</para>
</change>

<change type="feature">
<para lang="ru">
директива tcp_nodelay.
</para>
<para lang="en">
the tcp_nodelay directive.
</para>
</change>

<change type="feature">
<para lang="ru">
директива send_lowat работает не только на платформах, поддерживающих
kqueue NOTE_LOWAT, но и на всех, поддерживающих SO_SNDLOWAT.
</para>
<para lang="en">
the send_lowat directive is working not only on OSes that support
kqueue NOTE_LOWAT, but also on OSes that support SO_SNDLOWAT.
</para>
</change>

<change type="feature">
<para lang="ru">
эмуляция setproctitle() для Linux и Solaris.
</para>
<para lang="en">
the setproctitle() emulation for Linux and Solaris.
</para>
</change>

<change type="bugfix">
<para lang="ru">
ошибка при переписывании заголовка "Location" при проксировании.
</para>
<para lang="en">
the "Location" header rewrite bug fixed while the proxing.
</para>
</change>

<change type="bugfix">
<para lang="ru">
ошибка в модуле ngx_http_chunked_module, приводившая к зацикливанию.
</para>
<para lang="en">
the ngx_http_chunked_module module may get caught in an endless loop.
</para>
</change>

<change type="bugfix">
<para lang="ru">
ошибки в модуле /dev/poll.
</para>
<para lang="en">
the /dev/poll module bugs fixed.
</para>
</change>

<change type="bugfix">
<para lang="ru">
при проксировании и использовании временных файлов ответы портились.
</para>
<para lang="en">
the responses were corrupted when the temporary files were used
while the proxing.
</para>
</change>

<change type="bugfix">
<para lang="ru">
бэкенду передавались запросы с неперекодированными символами.
</para>
<para lang="en">
the unescaped requests were passed to the backend.
</para>
</change>

<change type="bugfix">
<para lang="ru">
на Linux 2.4 при конфигурации сборки нужно было обязательно использовать
параметр --with-poll_module.
</para>
<para lang="en">
while the build configuration on Linux 2.4 the --with-poll_module parameter
was required.
</para>
</change>

</changes>


<changes ver="0.1.0" date="04.10.2004">

<change>
<para lang="ru">
Первая публично доступная версия.
</para>
<para lang="en">
The first public version.
</para>
</change>

</changes>


</change_log>
